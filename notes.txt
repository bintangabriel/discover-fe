GET News for a day

request : GET (date) PATH = "/discover/{date}" date = yyyymmdd
response : {
    "day":
    [
        {
            "title" : "this is title",
            "content" : "",
            "imageUrl" : "adads",
        },
        {
            ...
        }
    ]
}   



"use client"
import Card from "@/src/components/Card";
import { getDateList } from "@/src/components/DateUtils";
import { redirectTo } from "@/src/hooks/useHandleNavigation";
import { getLastDate, setLastDate } from "@/src/hooks/useLastDate";
import Link from "next/link";
import React, { useEffect, useState } from "react";


async function fetchNewsData(date:string){
  try {
    const res = await fetch(`http://localhost:8000/discover/${date}`, {cache: 'no-store'});
    setLastDate();
    return res.json()
  } catch (error) {
    console.error('Error fetching the data: ', error)
    throw error;
  }
}

export default function Home() {

  const [storage, setStorage] = useState();

  useEffect(() => {
    const fetchInitial = async () => {
      const data = await fetchNewsData(getLastDate());
      const newsArray = data.news;
      setStorage(newsArray);
      console.log(storage)
    }
  })

  const handleClick: React.MouseEventHandler<HTMLButtonElement> = async (event) => {
    event.preventDefault();

    try {
      const data = await fetchNewsData(getLastDate());
      const newsArray = data.news;
      setStorage(newsArray);
    } catch (error) {
      console.error('error : ', error);
    }
  }


  const HandleClick = (path:string) => {
    redirectTo(path)
  }

  return (
    <div>
      <div className="flex justify-center">
        <div className="flex-row justify-center gap-4 w-4/5">
          {
            storage.map((news:any, index:any) => (
              <React.Fragment key={index}>
                <Link href={`/answer/${news.title}`} className="w-4/5">
                  <Card
                  title={news.title}
                    url={news.image_url}
                    content={news.content}
                  />
                </Link>
              </React.Fragment>
            ))
          }
          <div className="flex justify-center my-5">
          <button className="px-4 py-2 bg-blue-500 text-white font-semibold rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
          onClick={handleClick}>
            Load More</button>
          </div>
        </div>
      </div>   
    </div>
  );
}
